<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TOP Project - Rock-Paper-Scissors</title>
    <script>
      // Variables
      const ROCK = 1;
      const PAPER = 2;
      const SCISSORS = 3;

      let computerSelection;
      let playerSelection;
      let roundResults;
      let roundCounter = 0;

      // Functions Start
      // Random computer choice eg. rock, paper, scissors

      function getComputerChoice(min, max) {
        computerSelection = Math.floor(Math.random() * (max - min + 1) + min);

        // Computer Selection to console
        switch (computerSelection) {
          case 1:
            console.log("Computer chose: Rock!");
            return computerSelection;
            break;

          case 2:
            console.log("Computer chose: Paper!");
            return computerSelection;
            break;

          case 3:
            console.log("Computer chose: Scissors!");
            return computerSelection;
            break;
          default:
            console.log("Error selecting computer choice.");
        }
      }
      // Prompt user Rock, Paper. Scissors selection

      function getPlayerChoice() {
        playerSelection = +prompt(
          "Select choice:\n1 - Rock \n2 - Paper \n3 - Scissors"
        );
        switch (playerSelection) {
          case 1:
            console.log("You chose Rock!");
            // Convert to number before returning
            return playerSelection;
            break;

          case 2:
            console.log("You chose Paper!");
            return playerSelection;
            break;

          case 3:
            console.log("You chose Scissors!");
            return playerSelection;
            break;

          default:
            // No selection made or wrong selection, alert user
            if (playerSelection === 0) {
              alert("Exiting game, reload to try again");
            } else {
              alert("Please select either 1, 2, 3");
              getPlayerChoice();
            }
        }
      }

      // Play a round
      function playRound(playerSelection, computerSelection) {
        switch (playerSelection) {
          // Game Logic
          // Player Rock
          case 1:
            if (computerSelection === ROCK) {
              //   console.log("Tie!");
              return (roundResults = "Tie!");
            } else if (computerSelection === PAPER) {
              //   console.log("You lose!");
              return (roundResults = "You lose!");
            } else {
              //   console.log("You win!");
              return (roundResults = "You win!");
            }
            break;

          // Player Paper
          case 2:
            if (computerSelection === PAPER) {
              //   console.log("Tie!");
              return (roundResults = "Tie!");
            } else if (computerSelection === ROCK) {
              //   console.log("You win!");
              return (roundResults = "You win!");
            } else {
              //   console.log("You lose!");
              return (roundResults = "You lose!");
            }
            break;

          // Player Scissors
          case 3:
            if (computerSelection === SCISSORS) {
              //   console.log("Tie!");
              return (roundResults = "Tie!");
            } else if (computerSelection === ROCK) {
              //   console.log("You lose!");
              return (roundResults = "You lose!");
            } else {
              //   console.log("You win!");
              return (roundResults = "You win!");
            }
            break;

          default:
            return;
        }
      }
      // Starts the game
      function game() {
        // 5 Rounds for 1 game
        for (let i = 1; i < 6; i++) {
          console.log(`Round ${i}`);

          // Call function to get player and computer choice
          getPlayerChoice();
          // If player exits game then don't get computer function
          if (playerSelection !== 0) {
            getComputerChoice(1, 3);
          }
          // Plays a round
          playRound(playerSelection, computerSelection);
          console.log(roundResults);
          // Counts round wins
          countRoundResults(roundResults);
          // Adds space to the console for readability
          console.log(" ");
        }
        console.log(
          `Game Results: You have won ${roundCounter} out of 5 rounds!`
        );
        if (roundCounter >= 3) {
          console.log("You win the game!");
        } else {
          console.log("You lose the game!");
        }
      }

      // Counts round results to 5 then displays the winner
      function countRoundResults(roundResults) {
        if (roundResults === "You win!") roundCounter++;
      }

      // Functions End

      //Call Function to start game
      game();
    </script>
  </head>
  <body></body>
</html>
